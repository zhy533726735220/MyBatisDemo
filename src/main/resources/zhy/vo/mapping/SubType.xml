<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!--在每一个配置文件之中实际上都需要有一个独立的命名空间(名字，日后引用就需要此名称)-->
<!--考虑到后续要进行相关的日志的配置操作，所以对于这个资源文件都建议设置一个包名称-->
<!--命名空间(Name Space)，所以习惯"包名称+VO名称+NS"-->
<!--<mapper namespace="vo.mapping.MemberNS">-->
<mapper namespace="zhy.vo.mapping.SubTypeNS">

    <resultMap id="SubTypeMap" type="SubType">
        <id column="title" property="title"/>
        <id column="tid" property="tid"/>
        <association property="type" javaType="Type" column="tid" select="zhy.vo.mapping.TypeNS.findById"/>
        <!--<association property="type" javaType="Type" column="tid" resultMap="zhy.vo.mapping.TypeNS.TypeMap"/>-->
    </resultMap>

    <insert id="doCreate" parameterType="SubType">
        INSERT INTO subtype(title, tid) VALUES (#{title}, #{type.tid});
    </insert>

    <select id="findById" parameterType="Integer" resultMap="SubTypeMap">
        SELECT stid, title, tid FROM subtype WHERE stid=#{stid};
    </select>


    <select id="findAllByType" parameterType="Integer" resultMap="SubTypeMap">
        SELECT stid, title, tid FROM subtype WHERE tid=#{tid};
    </select>
</mapper>